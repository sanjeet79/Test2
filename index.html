<!DOCTYPE html>

<html lang="en">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="manifest" href="manifest.json">

    <title>üéÆ Trap The King</title>

    <style>

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html { touch-action: manipulation; overscroll-behavior: none; -webkit-text-size-adjust: 100%; }

        body {

            font-family: -apple-system, BlinkMacSystemFont, sans-serif;

            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('x1.jpeg') center/cover no-repeat;

            background-attachment: fixed !important;

            height: 100dvh;

            overflow: hidden;

            user-select: none;

            -webkit-user-select: none;

            position: relative;

        }



        /* --- MENU STYLES START --- */

        .menu-btn {

            position: fixed; top: 12px; right: 12px; z-index: 1000;

            background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px);

            border: 1px solid rgba(255, 255, 255, 0.2); color: white;

            padding: 8px 10px; border-radius: 12px; font-size: 18px; cursor: pointer;

            transition: all 0.3s ease;

        }

        .menu-btn:active { transform: scale(0.95); }



        .menu-dropdown {

            position: fixed; top: 60px; right: 15px; width: 130px;

            background: none; backdrop-filter: blur(15px);

            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 12px; padding: 10px;

            z-index: 999; transform-origin: top left; transform: scale(0); opacity: 0;

            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); pointer-events: none;

            box-shadow: 0 10px 30px rgba(0,0,0,0.5);

        }

        .menu-dropdown.open { transform: scale(1); opacity: 1; pointer-events: all; }



        .menu-item {

            display: flex; align-items: center; justify-content: space-between;

            padding: 5px; color: white; font-size: 11px;

            border-bottom: 1px solid rgba(255,255,255,0.1); cursor: pointer;

        }

        .menu-item:last-child { border-bottom: none; }

        .menu-item:active { background: rgba(255,255,255,0.05); border-radius: 8px; }



        /* Toggle Switch CSS */

        .switch { position: relative; display: inline-block; width: 40px; height: 22px; }

        .switch input { opacity: 0; width: 0; height: 0; }

        .slider {

            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;

            background-color: #ccc; transition: .4s; border-radius: 22px;

        }

        .slider:before {

            position: absolute; content: ""; height: 16px; width: 16px;

            left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%;

        }

        input:checked + .slider { background-color: #4ade80; }

        input:checked + .slider:before { transform: translateX(18px); }



        /* --- ABOUT MODAL STYLES --- */

        .modal-overlay {

            position: fixed; top: 0; left: 0; width: 100%; height: 100%;

            background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(5px); z-index: 2000;

            display: flex; align-items: center; justify-content: center;

            opacity: 0; pointer-events: none; transition: opacity 0.3s;

        }

        .modal-overlay.active { opacity: 1; pointer-events: all; }



        .modal-content {

            background: linear-gradient(135deg, #1a1a2e, #16213e); width: 90%; max-width: 500px;

            padding: 25px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.2); color: white;

            position: relative; transform: translateY(20px); transition: transform 0.3s;

            box-shadow: 0 20px 50px rgba(0,0,0,0.5);

        }

        .modal-overlay.active .modal-content { transform: translateY(0); }



        .modal-header { font-size: 24px; font-weight: bold; margin-bottom: 15px; color: #4ade80; display: flex; justify-content: space-between; align-items: center; }

        .close-modal { background: none; border: none; color: white; font-size: 24px; cursor: pointer; padding: 5px; }

        .modal-body { font-size: 15px; line-height: 1.6; color: #e0e0e0; max-height: 60vh; overflow-y: auto; }

        .modal-body h3 { color: #60a5fa; margin-top: 15px; margin-bottom: 5px; }

        .modal-body ul { padding-left: 20px; margin-bottom: 10px; }



        /* --- GAME GRID & LOADER --- */

        .landscape-warning {

            position: fixed; top: 0; left: 0; width: 100%; height: 100%;

            background: rgba(0,0,0,0.98); display: none; flex-direction: column;

            align-items: center; justify-content: center; z-index: 9999;

            font-size: 24px; color: white; text-align: center; padding: 40px;

        }



        .container {

            min-height: 100vh; display: flex; flex-direction: column;

            align-items: center; justify-content: center; padding: 30px;

            position: relative; max-width: 100vw;

        }



        .title {

            position: absolute; top: 20px; left: 45%; transform: translateX(-50%);

            font-size: clamp(24px, 5vw, 40px) !important;

            background: linear-gradient(45deg, #4ade80, #60a5fa, #f472b6);

            -webkit-background-clip: text; background-clip: text;

            -webkit-text-fill-color: transparent; color: transparent;

            text-align: center; font-weight: 800;

            text-shadow: 0 4px 20px rgba(74, 222, 128, 0.3);

            z-index: 100; pointer-events: none;

        }



        .game-grid {

            display: flex; gap: 35px; align-items: center; min-height: 220px;

            overflow-x: auto; padding: 20px 10px; scrollbar-width: none;

            -ms-overflow-style: none; scroll-snap-type: x mandatory;

            scroll-behavior: smooth; max-width: calc(100vw - 60px);
            margin-left:40px;
        }

        .game-grid::-webkit-scrollbar { display: none; }



        .game-box {

            flex: 0 0 200px; height: 140px; border-radius: 15px;

            display: flex; flex-direction: column; align-items: center; justify-content: center;

            text-decoration: none; color: white; font-weight: 700; position: relative;

            overflow: hidden; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);

            scroll-snap-align: center; cursor: pointer; box-shadow: 0 20px 40px rgba(0,0,0,0.3); padding: 12px;
        }

        .game-box::before { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: inherit; opacity: 0.3; z-index: 0; transition: opacity 0.3s; }

        .game-box:hover::before { opacity: 0.2; }

       

        .game-box:nth-child(1) { background: linear-gradient(135deg, #ff6b6b, #ee5a52); }

        .game-box:nth-child(2) { background: linear-gradient(135deg, #4ecdc4, #44a08d); }

        .game-box:nth-child(3) { background: linear-gradient(135deg, #45b7d1, #96c93d); }

        .game-box:nth-child(4) { background: linear-gradient(135deg, #f9ca24, #f0932b); }

        .game-box:nth-child(5) { background: linear-gradient(135deg, #9b59b6, #8e44ad); }



        .game-box:hover { transform: translateY(-7px) scale(1.03); box-shadow: 0 25px 50px rgba(0,0,0,0.4); }

        .game-box:active { transform: translateY(-5px) scale(1.01); }



        .box-icon { font-size: clamp(30px, 8vw, 30px); margin-bottom: 6px; z-index: 2; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3)); }

        .box-title { font-size: clamp(12px, 3vw, 16px); margin-bottom: 4px; line-height: 1.2; z-index: 2; text-shadow: 0 2px 8px rgba(0,0,0,0.5); }

        .box-desc { font-size: clamp(11px, 2vw, 11px); opacity: 0.9; z-index: 2; text-align: center; padding: 0 8px; line-height: 1.2; }



        .dots {

            display: flex; gap: 10px; position: absolute; bottom: 10px; left: 50%;

            transform: translateX(-50%); background: rgba(0,0,0,0.7); padding: 8px 16px;

            border-radius: 20px; z-index: 10; margin-top: 0; opacity: 1 !important;

        }

        .dots::before { content: ''; position: absolute; top: -8px; left: -8px; right: -8px; bottom: -8px; background: rgba(0,0,0,0.7); border-radius: 20px; z-index: -1; }

        .dot {

            width: 12px; height: 12px; border-radius: 50%; background: rgba(255,255,255,0.8) !important;

            border: 2px solid rgba(255,255,255,0.9); transition: all 0.3s; cursor: pointer;

        }

        .dot.active { background: #ffffff !important; transform: scale(1.3); box-shadow: 0 0 12px rgba(255,255,255,1); }



        /* Loader Styles */

        #gameLoader {

            position: fixed; top: 0; left: 0; width: 100%; height: 100%;







        background:url('x1.jpeg') center/cover no-repeat;

            z-index: 99999; display: flex; flex-direction: column; align-items: center; justify-content: center;

            transition: opacity 0.5s ease;

        }

        .loader-content { text-align: center; animation: float 2s infinite ease-in-out; }

        .loader-icon { font-size: 80px; filter: drop-shadow(0 0 20px rgba(74, 222, 128, 0.5)); margin-bottom: 20px; }

        .loader-text {

            font-size: 36px; font-weight: 1000; color: white; letter-spacing: 2px; margin-bottom: 30px;

            background: linear-gradient(45deg, #141514, #15191d);

            background-clip: text; -webkit-background-clip: text;

            -webkit-text-fill-color: transparent; color: transparent;

        }

        .progress-bar { width: 330px; height: 6px; background: rgba(11, 1, 1, 0.1); border-radius: 10px; overflow: hidden; margin: 0 auto; }

        .progress-fill {

            height: 100%; background: #045923; width: 0%; border-radius: 10px;

            animation: fillProgress 2.8s linear forwards; box-shadow: 0 0 10px #4ade80;

        }

        @keyframes fillProgress { 0% { width: 0%; } 100% { width: 100%; } }

        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }



        /* Media Queries */

        @media (orientation: portrait) and (max-width: 1023px){

            .landscape-warning { display: flex !important; }

            .container, .menu-btn, .menu-dropdown { display: none !important; }

        }

        @media (min-width: 1200px) {

            .game-grid { flex-wrap: wrap; justify-content: center; gap: 30px; max-width: 1400px; overflow: hidden; padding: 30px 0; min-height: 160px; height: 160px; }

            .game-box { flex: 0 0 260px; height: 180px; }

            .title { position: static; margin-bottom: 40px; transform: none; }

            .dots { display: none; }

            .container { padding: 40px; }

        }

        @media (max-width: 1199px) and (min-width: 768px) and (orientation: landscape) { .game-box { flex: 0 0 260px; height: 175px; } }

        @media (max-width: 2000px) and (orientation: landscape) { .game-grid { gap: 25px; padding: 15px 5px; } .game-box { flex: 0 0 220px; height: 118px; } }

        @media (hover: none) and (pointer: coarse) { * { touch-action: manipulation !important; } }

    </style>

</head>

<body>

    <div id="gameLoader">

        <div class="loader-content">

            <div class="loader-icon">üëë</div>

            <div class="loader-text">TRAP THE KING</div>

            <div class="progress-bar"><div class="progress-fill"></div></div>

        </div>

    </div>



    <audio id="bgMusic" loop>

        <source src="music/background.mp3" type="audio/mpeg">

    </audio>



    <div class="landscape-warning">

        <div style="font-size: 32px; margin-bottom: 20px;">üîÑ Rotate to Landscape</div>

        <div style="font-size: 18px;">Please rotate your device to play</div>

    </div>



    <button class="menu-btn" id="menuBtn">‚ò∞</button>



    <div class="menu-dropdown" id="menuDropdown">

        <div class="menu-item" id="aboutBtn">

            <span>‚ÑπÔ∏è About / Rules</span>

        </div>

        <div class="menu-item">

            <span>üîä Sound</span>

            <label class="switch">

                <input type="checkbox" id="soundToggle">

                <span class="slider"></span>

            </label>

        </div>

    </div>



    <div class="modal-overlay" id="aboutModal">

        <div class="modal-content">

            <div class="modal-header">

                <span>üìú Game Rules</span>

                <button class="close-modal" id="closeModal">√ó</button>

            </div>

            <div class="modal-body">

                <h3>Objective:</h3>

                <p>King ko board ke edge (corner) tak pahunchne se roko.</p>

                <h3>How to Play:</h3>

                <ul>

                    <li>King har turn par ek step chalta hai.</li>

                    <li>Aapko boxes par click karke block lagana hai.</li>

                    <li>Agar King board se bahar nikal gaya, aap haar jaoge!</li>

                    <li>Agar King chaaron taraf se ghir gaya, aap jeet jaoge!</li>

                </ul>

                <p style="text-align:center; margin-top:15px; font-weight:bold; color:#f472b6;">Good Luck! üéÆ</p>

            </div>

        </div>

    </div>



    <div class="container">

        <h1 class="title">üéÆ TRAP THE KING</h1>

       

        <div class="game-grid" id="gameGrid">

            <a href="random-menu.html?mode=random" class="game-box" data-slide="0">

                <div class="box-icon">üåê</div>

                <div class="box-title">Random Online</div>

                <div class="box-desc">Random player ke saath</div>

            </a>



            <a href="online-setup.html?mode=friend" class="game-box" data-slide="1">

                <div class="box-icon">üë•</div>

                <div class="box-title">Friend Online</div>

                <div class="box-desc">Room code se khelo</div>

            </a>



            <a href="game-offline.html" class="game-box" data-slide="2">

                <div class="box-icon">ü§ù</div>

                <div class="box-title">Offline Friend</div>

                <div class="box-desc">Same phone 2 players</div>

            </a>



            <a href="ai-setup.html" class="game-box" data-slide="3">

                <div class="box-icon">ü§ñ</div>

                <div class="box-title">Computer AI</div>

                <div class="box-desc">AI ke khilaaf khelo</div>

            </a>



            <a href="puzzle-setup.html" class="game-box" data-slide="4">

                <div class="box-icon">üß©</div>

                <div class="box-title">Puzzle Mode</div>

                <div class="box-desc">Puzzles solve karo</div>

            </a>

        </div>



        <div class="dots" id="dots">

            <div class="dot active" data-slide="0"></div>

            <div class="dot" data-slide="1"></div>

            <div class="dot" data-slide="2"></div>

            <div class="dot" data-slide="3"></div>

            <div class="dot" data-slide="4"></div>

        </div>

    </div>



    <script>

        document.addEventListener("DOMContentLoaded", function() {

           

            // --- 1. LOADER LOGIC ---

            const loader = document.getElementById('gameLoader');

            if (loader) {

                setTimeout(() => {

                    loader.style.opacity = '0';

                    setTimeout(() => { loader.style.display = 'none'; }, 500);

                }, 3000); // 3 Sec Wait

            }



            // --- 2. MENU LOGIC ---

            const menuBtn = document.getElementById('menuBtn');

            const menuDropdown = document.getElementById('menuDropdown');

            const aboutBtn = document.getElementById('aboutBtn');

            const aboutModal = document.getElementById('aboutModal');

            const closeModal = document.getElementById('closeModal');



            if (menuBtn && menuDropdown) {

                menuBtn.addEventListener('click', (e) => {

                    e.stopPropagation();

                    menuDropdown.classList.toggle('open');

                    menuBtn.innerHTML = menuDropdown.classList.contains('open') ? '‚úï' : '‚ò∞';

                });



                document.addEventListener('click', (e) => {

                    if (!menuDropdown.contains(e.target) && !menuBtn.contains(e.target)) {

                        menuDropdown.classList.remove('open');

                        menuBtn.innerHTML = '‚ò∞';

                    }

                });

            }



            // About Modal Logic

            if (aboutBtn && aboutModal) {

                aboutBtn.addEventListener('click', () => {

                    aboutModal.classList.add('active');

                    menuDropdown.classList.remove('open');

                    menuBtn.innerHTML = '‚ò∞';

                });



                if (closeModal) closeModal.addEventListener('click', () => aboutModal.classList.remove('active'));

               

                aboutModal.addEventListener('click', (e) => {

                    if (e.target === aboutModal) aboutModal.classList.remove('active');

                });

            }



            // --- 3. SOUND LOGIC ---

            const soundToggle = document.getElementById('soundToggle');

            const bgMusic = document.getElementById('bgMusic');



            if (soundToggle && bgMusic) {

                const savedSound = localStorage.getItem('gameSound');

                soundToggle.checked = (savedSound !== 'off'); // Default ON



                function startAudio() {

                    if (!soundToggle.checked) return; // üî• STRICT CHECK

                    if (bgMusic.paused) {

                        bgMusic.play().then(() => {

                            document.removeEventListener('click', startAudio);

                            document.removeEventListener('touchstart', startAudio);

                            document.removeEventListener('keydown', startAudio);

                        }).catch(e => {});

                    }

                }



                document.addEventListener('click', startAudio);

                document.addEventListener('touchstart', startAudio);

                document.addEventListener('keydown', startAudio);



                soundToggle.addEventListener('change', (e) => {

                    e.stopPropagation();

                    if (soundToggle.checked) {

                        localStorage.setItem('gameSound', 'on');

                        bgMusic.play().catch(()=>{});

                        document.addEventListener('click', startAudio);

                        document.addEventListener('touchstart', startAudio);

                    } else {

                        localStorage.setItem('gameSound', 'off');

                        bgMusic.pause();

                    }

                });

            }



            // --- 4. SLIDER LOGIC ---

            if (window.innerHeight < window.innerWidth && window.innerWidth <= 1199) {

                const grid = document.getElementById('gameGrid');

                const dotElements = document.querySelectorAll('.dot');

                let currentSlide = 0;



                if (grid && dotElements.length > 0) {

                    dotElements.forEach((dot, index) => {

                        dot.addEventListener('click', () => {

                            const slideWidth = grid.children[0].offsetWidth + 35;

                            grid.scrollTo({ left: index * slideWidth, behavior: 'smooth' });

                            currentSlide = index;

                            updateDots();

                        });

                    });



                    grid.addEventListener('scroll', () => {

                        const scrollLeft = grid.scrollLeft;

                        const slideWidth = grid.children[0].offsetWidth + 35;

                        currentSlide = Math.round(scrollLeft / slideWidth);

                        updateDots();

                    });



                    function updateDots() {

                        dotElements.forEach((dot, index) => {

                            dot.classList.toggle('active', index === currentSlide);

                        });

                    }

                }

            }



            // Prevent Zoom

            document.addEventListener('dblclick', (e) => e.preventDefault(), { passive: false });

        });

    </script>

</body>

</html>


